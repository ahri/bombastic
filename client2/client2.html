<html>
    <head>
        <title>Bomber Client 2</title>
    </head>
    <body>
        <pre id="info"></pre>
        <pre id="state"></pre>
        <script type="text/javascript" src="jquery-1.6.2.js"></script>
        <script type="text/javascript" src="json2.js"></script>
        <script type="text/javascript" src="jquery.rest.js"></script>
        <script type="text/javascript">
            $(document).keydown(function(e) {
                if (e.keyCode == 32) { 
                    alert("space pressed");
                    return false;
                } else if (e.keyCode == 37) { 
                    alert("left pressed");
                    return false;
                } else if (e.keyCode == 38) {
                    alert("up pressed");
                    return false;
                } else if (e.keyCode == 39) {
                    alert("right pressed");
                    return false;
                } else if (e.keyCode == 40) {
                    alert("down pressed");
                    return false;
                } 
            });

            function state_update() {
                $.read('/state', function(resp) {
                    $('#state').text(resp);
                });
            }

            function player_create() {
                $.create('/player', JSON.stringify({'name': 'js'}), function(resp) {
                    $('#info').text(resp);
                });
            }

            $(function() {
                player_create();
                state_update();
            });
        </script>
    </body>
</html>
